{% extends 'header.html' %}
{% block contenttop %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link rel="stylesheet" href="{{url_for('static', filename='like.css')}}">
    <link rel="stylesheet" href="{{ url_for('static', filename='header.css')}}">
    <link rel="stylesheet" href="{{ url_for('static', filename='slider.css')}}">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""></script>

    <title>TravelHub - Like History</title>
</head>
<body class="intero">
    
    <video autoplay muted loop id="background-video">
        <source src="/static/images/sfondo.mp4" type="video/mp4">
    </video>

    {% endblock %}
    {% block contentdown %}
    {% if not session %}
     <script>
        //FARGLI VEDERE QUESTO QUANDO PRESENTIAMO CHE è FIGO
        window.location.replace("/login"); //se non sei loggato e in qualche modo arrivi qua ti reindirizzo al login
      </script>
    {% else %}
        
        <!-- come si fa a mettere solo una volta i per te? -->
        {% if size == 0 %}

            <!-- QUA CE SE PUÒ METTE UN LOGO!! -->            
            
            <p class="h">Lame...not enough photo liked yet!</p>
                
                <!-- FOR YOU SECTION -->

            <p class="h3">For You</p>
            {% if for_u_list != [] %} 

                <div class="swiper swiperImg">
                    <div class="swiper-wrapper">
                        {% for photo in for_u_list %}
                            <!--nuova classe foru2 presennte in slider.css-->
                            <div class="foru2 swiper-slide">    
                                    <img src="{{ photo[1] }}">
                                    <div class="overlay-text-stuff">

                                        <!-- DA CAPÌ CHE FINE FAGLIE FA -->
                                        <!-- <button id = "forulikebtn{{ photo[2] }}" class = "like pulsante4"  value = '{{ photo[2] }}'>❤</button>
                                        <button id = "forulikebtn{{ photo[2] }}" class = "like pulsante4" value = '{{ photo[2] }}'>+</button> -->
                                            {{ photo[0] }}
                                    </div>
                            </div>
                        {% endfor %}

                        
                    </div>
                </div>
        {% endif %}

        <br><br><br><br><br><br>
        <!-- FOOTER ? -->

        {% elif  size == 1 %} <!-- SE HO UN SOLO ELEMENTO RENDERIZZO SOLO QUELLO -->
            <div class = "sup">
                <p class="h">The city you liked the most is...{{ city_photo_list[0][0] }}!</p>
                
                <div class = "swiper swiperCubic">
                    <div class="swiper-wrapper">
                        <div class = "cubic swiper-slide">
                            <img id = "top" src = "{{ city_photo_list[0][1] }}">
                        </div>
                        <div class = "cubic swiper-slide">
                            <div class = "blurcube">
                                <img id = "top" src = "{{ city_photo_list[0][1] }}">
                                <div class = "textcontainer"> 
                                    <p>{{ city_photo_list[0][3] }}</p>
                                    <a class="ticket" href="https://www.skyscanner.it/trasporti/voli/rome/{{city_photo_list[0][2]}}/?adultsv2=1&cabinclass=economy&childrenv2=&ref=home&rtn=0&preferdirects=false&outboundaltsenabled=false&inboundaltsenabled=false&oym=2406&selectedoday=01" target="_blank"><button class="pulsante" type="button">Book your ticket✈</button></a>
                                </div>
                            </div>
                        </div>
                        <div id = "map" class = "mapcontainer swiper-slide" name = "{{ city_photo_list[0][0] }}">
                            <!-- I DON'T HAVE TO FILL THIS-->
                        </div>
                    </div>
                </div>

                <p class = "h2">put more likes to see a podium of photos here!</p>
            </div>

                <!-- FOR YOU SECTION -->

                <p class="h3">For You</p>
                {% if for_u_list != [] %} 
    
                    <div class="swiper swiperImg">
                        <div class="swiper-wrapper">
                            {% for photo in for_u_list %}
                                <!--nuova classe foru2 presennte in slider.css-->
                                <div class="foru2 swiper-slide">    
                                        <img src="{{ photo[1] }}">
                                        <div class="overlay-text-stuff">
    
                                            <!-- DA CAPÌ CHE FINE FAGLIE FA -->
                                            <!-- <button id = "forulikebtn{{ photo[2] }}" class = "like pulsante4"  value = '{{ photo[2] }}'>❤</button>
                                            <button id = "forulikebtn{{ photo[2] }}" class = "like pulsante4" value = '{{ photo[2] }}'>+</button> -->
                                                {{ photo[0] }}
                                        </div>
                                </div>
                            {% endfor %}
    
                            
                        </div>
                    </div>
                {% endif %}

        {% elif size == 2 %}    
        
            <!-- UN'IMMAGINE SOPRA ALL'ALTRA -->
            <div class = "container">
                    <p class="h2">The city you liked the most is...{{ city_photo_list[0][0] }}!</p>
                    <!--DA PROBLEMI IL CSS <a class="ticket" href="https://www.skyscanner.it/trasporti/voli/rome/{{city_photo_list[0][2]}}/?adultsv2=1&cabinclass=economy&childrenv2=&ref=home&rtn=0&preferdirects=false&outboundaltsenabled=false&inboundaltsenabled=false&oym=2406&selectedoday=01" target="_blank"><button class="pulsante" type="button">Book your ticket✈</button></a> -->
                    
                    <div class = "swiper swiperCubic">
                        <div class="swiper-wrapper">
                            <div class = "cubic swiper-slide">
                                <img id = "top" src = "{{ city_photo_list[0][1] }}">
                            </div>
                            <div class = "cubic swiper-slide">
                                <div class = "blurcube">
                                    <img id = "top" src = "{{ city_photo_list[0][1] }}">
                                    <div class = "textcontainer"> 
                                        <p>{{ city_photo_list[0][3] }} </p>
                                        <a class="ticket" href="https://www.skyscanner.it/trasporti/voli/rome/{{city_photo_list[0][2]}}/?adultsv2=1&cabinclass=economy&childrenv2=&ref=home&rtn=0&preferdirects=false&outboundaltsenabled=false&inboundaltsenabled=false&oym=2406&selectedoday=01" target="_blank"><button class="pulsante" type="button">Book your ticket✈</button></a>

                                    </div>
                                </div>
                            </div>
                            <div id = "map" class = "mapcontainer swiper-slide" name = "{{ city_photo_list[0][0] }}">
                                <!-- I DON'T HAVE TO FILL THIS-->
                            </div>
                        </div>
                    </div>

                
                <!-- QUESTA QUI PIÙ PICCOLA?? -->
                
                    <p class="h2">second image in podium is...{{ city_photo_list[1][0] }}!</p>
                    <div class = "swiper swiperCubic">
                        <div class="swiper-wrapper">
                            <div class = "cubic swiper-slide">
                                <img id = "top" src = "{{ city_photo_list[1][1] }}">
                            </div>
                            <div class = "cubic swiper-slide">
                                <div class = "blurcube">
                                    <img id = "top" src = "{{ city_photo_list[1][1] }}">
                                    <div class = "textcontainer"> 
                                        <p> {{ city_photo_list[1][3] }} </p>
                                        <a class="ticket" href="https://www.skyscanner.it/trasporti/voli/rome/{{city_photo_list[1][2]}}/?adultsv2=1&cabinclass=economy&childrenv2=&ref=home&rtn=0&preferdirects=false&outboundaltsenabled=false&inboundaltsenabled=false&oym=2406&selectedoday=01" target="_blank"><button class="pulsante" type="button">Book your ticket✈</button></a>
                                    </div>
                                </div>
                            </div>
                            <div id = "map2" class = "mapcontainer swiper-slide" name = "{{ city_photo_list[1][0] }}">
                            <!--Leaflet data automaticly filled here-->   
                            </div>
                        </div>
                    </div> 

                    <!-- <img id = "top" src = "{{ city_photo_list[1][1] }}" width="600" height="600"> -->
                    <p class = "h2">put more like to complete the podium!</p>
                
            </div>
                <!-- FOR YOU SECTION -->

                <p class="h3">For You</p>
                {% if for_u_list != [] %} 
    
                    <div class="swiper swiperImg">
                        <div class="swiper-wrapper">
                            {% for photo in for_u_list %}
                                <!--nuova classe foru2 presennte in slider.css-->
                                <div class="foru2 swiper-slide">    
                                        <img src="{{ photo[1] }}">
                                        <div class="overlay-text-stuff">
    
                                            <!-- DA CAPÌ CHE FINE FAGLIE FA -->
                                            <!-- <button id = "forulikebtn{{ photo[2] }}" class = "like pulsante4"  value = '{{ photo[2] }}'>❤</button>
                                            <button id = "forulikebtn{{ photo[2] }}" class = "like pulsante4" value = '{{ photo[2] }}'>+</button> -->
                                                {{ photo[0] }}
                                        </div>
                                </div>
                            {% endfor %}
    
                            
                        </div>
                    </div>
                {% endif %}

        {% else %}

            <div class = "sup">
                    <p class="h">The city you liked the most is...{{ city_photo_list[0][0] }}!</p>
                    <!-- <img id = "top" src = "{{ city_photo_list[0][1] }}" width="600" height="600"> -->

                    <div class = "swiper swiperCubic">
                        <div class="swiper-wrapper">
                            <div class = "cubic swiper-slide">
                                <img id = "top" src = "{{ city_photo_list[0][1] }}">
                            </div>
                            <div class = "cubic swiper-slide">
                                <div class = "blurcube">
                                    <img id = "top" src = "{{ city_photo_list[0][1] }}">
                                    <div class = "textcontainer"> 
                                        <p>{{ city_photo_list[0][3] }} </p>
                                        <a class="ticket" href="https://www.skyscanner.it/trasporti/voli/rome/{{city_photo_list[0][2]}}/?adultsv2=1&cabinclass=economy&childrenv2=&ref=home&rtn=0&preferdirects=false&outboundaltsenabled=false&inboundaltsenabled=false&oym=2406&selectedoday=01" target="_blank"><button class="pulsante" type="button">Book your ticket✈</button></a>
                                    </div>
                                </div>
                            </div>
                            <div id = "map" class = "mapcontainer swiper-slide" name = "{{ city_photo_list[0][0] }}">
                            </div>
                        </div>
                    </div>

                    <p class="h2">Damn! You really appreciated also {{ city_photo_list[1][0] }} and {{ city_photo_list[2][0] }}!</p>
            </div>

            <!-- QUESTA DIV PUÒ DARE PROBLEMI -->
            <div class = "scorrimento">
                <div class = "swiper swiperCubic2">
                    <div class="swiper-wrapper">
                        <div class = "cubic swiper-slide">
                            <img class="minor" src = "{{ city_photo_list[1][1] }}" >

                        </div>
                        <div class = "blurring swiper-slide">
                                <img src = "{{ city_photo_list[1][1] }}" >
                                <!-- <div class = "textcontainer"> 
                                    <p>{{ city_photo_list[1][3] }} </p>
                                    <a class="ticket" href="https://www.skyscanner.it/trasporti/voli/rome/{{city_photo_list[1][2]}}/?adultsv2=1&cabinclass=economy&childrenv2=&ref=home&rtn=0&preferdirects=false&outboundaltsenabled=false&inboundaltsenabled=false&oym=2406&selectedoday=01" target="_blank"><button class="pulsante" type="button">Book your ticket✈</button></a>
                                </div> -->
                        </div>
                        <div id = "map2" class = "mapcontainer swiper-slide" name = "{{ city_photo_list[1][0] }}">
                        </div>
                    </div>
                </div>

                <div class = "swiper swiperCubic2">
                    <div class="swiper-wrapper">
                        <div class = "cubic swiper-slide">
                            <img class="minor" src = "{{ city_photo_list[2][1] }}" >
                        </div>
                        <div class = "cubic swiper-slide">
                            <div class = "blurcube">
                                <img class="minor" src = "{{ city_photo_list[2][1] }}" >

                                <div class = "textcontainer"> 
                                    <p>{{ city_photo_list[2][3] }} </p>
                                    <a class="ticket" href="https://www.skyscanner.it/trasporti/voli/rome/{{city_photo_list[2][2]}}/?adultsv2=1&cabinclass=economy&childrenv2=&ref=home&rtn=0&preferdirects=false&outboundaltsenabled=false&inboundaltsenabled=false&oym=2406&selectedoday=01" target="_blank"><button class="pulsante" type="button">Book your ticket✈</button></a>
                                </div>

                            </div>
                        </div>
                        <div id = "map3" class = "mapcontainer swiper-slide" name = "{{ city_photo_list[2][0] }}">
                        </div>
                    </div>
                </div>
            </div>


            <!-- FOR YOU SECTION -->

            <p class="h3">For You</p>
            {% if for_u_list != [] %} 

                <div class="swiper swiperImg">
                    <div class="swiper-wrapper">
                        {% for photo in for_u_list %}
                            <!--nuova classe foru2 presennte in slider.css-->
                            <div class="foru2 swiper-slide">    
                                    <img src="{{ photo[1] }}" style="max-height: 400px;">
                                    <div class="overlay-text-stuff">

                                        <!-- DA CAPÌ CHE FINE FAGLIE FA -->
                                        <!-- <button id = "forulikebtn{{ photo[2] }}" class = "like pulsante4"  value = '{{ photo[2] }}'>❤</button>
                                        <button id = "forulikebtn{{ photo[2] }}" class = "like pulsante4" value = '{{ photo[2] }}'>+</button> -->
                                            {{ photo[0] }}
                                    </div>
                            </div>
                        {% endfor %}

                        
                    </div>
                </div>
            {% endif %}


        {% endif %}
    {% endif %}

    <script>
        /* perché non sono dentro ad un file? */
    function onTop() {
        window.scrollTo({ top: 0, behavior: 'smooth' }); // Scorri verso l'inizio della pagina con animazione
    }
    
    window.onscroll = function() {
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            document.getElementById("top2").style.display = "block";
        } else {
            document.getElementById("top2").style.display = "none";
        }
    };
    
    </script>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script type = "text/javascript" src = "{{url_for('static', filename='swiperimg.js')}}"></script>
    <script type = "text/javascript" src = "{{url_for('static', filename='aquirecity.js')}}"></script>
</body>
</html>
{% endblock %}